CREATE TABLE USERS (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL VARCHAR2(255) NOT NULL,
    IS_ACTIVE NUMBER(1) NOT NULL,
    PASSWORD VARCHAR2(255) NOT NULL,
    ROLE NUMBER(3) NOT NULL
);

CREATE TABLE CATEGORIES (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(255) NOT NULL
);

CREATE TABLE PRODUCTS (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DESCRIPTION VARCHAR2(255),
    NAME VARCHAR2(255) NOT NULL,
    PRICE NUMBER,
    CATEGORY_ID NUMBER NOT NULL,
    CONSTRAINT FK_PRODUCTS_CATEGORY FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORIES(ID)
);

CREATE TABLE USER_FAVORITE_PRODUCTS (
    USER_ID NUMBER NOT NULL,
    PRODUCT_ID NUMBER NOT NULL,
    PRIMARY KEY (USER_ID, PRODUCT_ID),
    CONSTRAINT FK_UFP_USER FOREIGN KEY (USER_ID) REFERENCES USERS(ID) ON DELETE CASCADE,
    CONSTRAINT FK_UFP_PRODUCT FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(ID) ON DELETE CASCADE
);